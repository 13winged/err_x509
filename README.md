# err_x509 ğŸ”§

[![Python Version](https://img.shields.io/badge/python-3.7%2B-blue.svg)](https://www.python.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![GitHub](https://img.shields.io/badge/GitHub-13winged%2Ferr__x509-blue)](https://github.com/13winged/err_x509)

**err_x509** is a powerful command-line tool to automatically fix x509 SSL certificate errors in Clash configurations by adding `skip-cert-verify: true` to all proxy servers.

## âœ¨ Features

- âœ… **Fix x509 SSL errors** in Clash with one command
- âœ… **Cross-platform** - Windows, macOS, Linux support
- âœ… **Smart parsing** - Handles any YAML format (single/multi-line)
- âœ… **Batch processing** - Fix multiple files at once
- âœ… **Non-destructive** - Creates new files, keeps originals
- âœ… **Backup support** - Optional backups before changes
- âœ… **Verbose output** - See exactly what's happening
- âœ… **Preview mode** - See changes before applying

## ğŸš€ Quick Start

### Installation

```bash
# Install from PyPI (recommended)
pip install err-x509

# Or install from source
git clone https://github.com/13winged/err_x509.git
cd err_x509
pip install -e .
```

### Basic Usage

```bash
# Fix a single configuration file
err_x509 fix config.yaml

# Specify output file
err_x509 fix input.yaml output_fixed.yaml

# Enable verbose mode and backup
err_x509 fix -v -b config.yaml
```

### Advanced Usage

```bash
# Batch process all YAML files in a directory
err_x509 batch ./configs/

# Preview changes without saving
err_x509 preview config.yaml

# Dry run (see what would be done)
err_x509 fix --dry-run config.yaml

# Force overwrite existing file
err_x509 fix --force config.yaml existing_output.yaml
```

## ğŸ“‹ Examples

### Before (`config.yaml`)
```yaml
port: 7890
proxies:
  - {name: Server1, server: s1.example.com, port: 443}
  - {name: Server2, server: s2.example.com, port: 443}
```

### After (`config_fixed.yaml`)
```yaml
# ===========================================================================
# Clash Configuration with SSL Verification Disabled
# Generated by err_x509 - x509 SSL Error Fixer
# GitHub: https://github.com/13winged/err_x509
# Source: config.yaml
# Generated: 2024-01-15 10:30:00
# ===========================================================================

port: 7890
proxies:
  - {name: Server1, server: s1.example.com, port: 443, skip-cert-verify: true}
  - {name: Server2, server: s2.example.com, port: 443, skip-cert-verify: true}

# ===========================================================================
# Statistics
# Total proxies processed: 2
# SSL verification disabled for all servers
# Output file: config_fixed.yaml
# 
# Security Warning:
# skip-cert-verify: true disables SSL certificate validation.
# Use only with trusted servers in non-sensitive contexts.
# ===========================================================================
```

## ğŸ¯ Use Cases

1. **Fix SSL errors** when Clash shows x509 certificate errors
2. **Test proxy servers** without strict SSL verification
3. **Quick configuration** for development and testing
4. **Batch update** multiple Clash configuration files
5. **Migrate configurations** between different environments

## âš ï¸ Security Warning

`skip-cert-verify: true` **disables SSL certificate validation**, which reduces security. Use this tool only:

- For testing purposes
- With trusted proxy servers
- When you understand the risks
- **Not** for sensitive operations or production environments

## ğŸ› ï¸ Development

### Setup Development Environment

```bash
git clone https://github.com/13winged/err_x509.git
cd err_x509
python -m venv venv

# On Windows
venv\Scripts\activate

# On Linux/macOS
source venv/bin/activate

pip install -e ".[dev]"
```

### Run Tests

```bash
pytest tests/
pytest --cov=err_x509 tests/
```

### Code Quality

```bash
# Format code
black err_x509/ tests/

# Lint code
flake8 err_x509/ tests/

# Type checking
mypy err_x509/
```

## ğŸ“ Project Structure

```
err_x509/
â”œâ”€â”€ err_x509/          # Python package
â”‚   â”œâ”€â”€ core.py       # Main logic
â”‚   â”œâ”€â”€ cli.py        # Command-line interface
â”‚   â””â”€â”€ utils.py      # Utilities
â”œâ”€â”€ tests/            # Test suite
â”œâ”€â”€ scripts/          # OS-specific scripts
â”œâ”€â”€ examples/         # Example configurations
â””â”€â”€ docs/             # Documentation
```